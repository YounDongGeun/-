<!DOCTYPE html>
<html lang="kr" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title></title>
    <script src ="jquery-3.4.1.min.js" charset="utf-8"></script>
    <style>
    *{padding: 0; margin: 0;}
      canvas{background: #eee; display: block; margin: 0 auto;}
    </style>
  </head>
  <body>
    <script type="text/javascript">
    $(document).ready(function() {
        var canvas = $("#canvas")[0];
        var ctx = canvas.getContext("2d");
        var x = canvas.width/2;//캔퍼스 폭 중앙
        var y = canvas.height -130;//캔퍼스 바닥에서 130떨어진 곳
        //--------------------------------------------------------------------
        var dx = 2;
        var dy = -2;
        var barY = 4;
        //--------------------------------------------------------------------
        var ballRadius = 10;

        var paddleHeight = 75;
        var paddleWidht = 10;
        var player2paddleX = (canvas.width - paddleWidht*4);
        var player2paddleY = ((canvas.height - paddleHeight)/2);

        // document.addEventListener("keydown", keyDownHandler, false);
        // document.addEventListener("keyup", keyUpHandler, false);

        function drawPaddle(){
          ctx.beginPath();
          ctx.rect(player2paddleX, player2paddleY, paddleWidht, paddleHeight);
          ctx.fillStyle = "#FFFF00";
          ctx.fill();
          ctx.closePath();
        }
        function drawBall(){
          ctx.beginPath();
          ctx.arc(x, y, ballRadius, 0, Math.PI*2);
          ctx.fillStyle = "#0095DD";
          ctx.fill();
          ctx.closePath();
        }

        function moveAll(){
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          drawBall();
          drawPaddle();
          if(x + dx > canvas.width-ballRadius || x + dx < ballRadius){
            dx = -dx;
          }

          if(y + dy > canvas.height-ballRadius || y + dy < ballRadius ){ // 위 아래벽 튕겨내기
            dy = -dy;
          }
//------------------------------------------------------------------------------------
          $(document).keydown(function(event) {
            if (event.keyCode == '38') {
              player2paddleY += barY;
              if(player2paddleY > 0){
                player2paddleY = 0;
              }
            }
            else if (event.keyCode == '40') {
              player2paddleY -= barY;
              if(player2paddleY < 420){
                player2paddleY = 420 - paddleHeight;
              }
            }
          });
//------------------------------------------------------------------------------------
          x += dx;
          y += dy;
        }
        setInterval(moveAll, 20);
      });
    </script>
    <h1>핑퐁(탁구게임)</h1>
    <hr>
    <canvas id="canvas" width="600" height="420"></canvas>
    <!-- <div id="player1_Bar"></div>
     <div id="player2_Bar"></div>
     <div id="ball"></div> -->
  </body>
</html>

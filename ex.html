<!DOCTYPE html>
<html lang="kr" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Gamedev Canvas</title>
    <style>
      *{padding: 0; margin: 0;}
        canvas{background: #eee; display: block; margin: 0 auto;}
    </style>
  </head>
  <body>
    <canvas id="myCanvas" width="600" height="420"></canvas>

    <script>
        var canvas = document.getElementById("myCanvas");
        var ctx = canvas.getContext("2d");
        var x = canvas.width/2;//캔퍼스 폭 중앙
        var y = canvas.height -130;//캔퍼스 바닥에서 130떨어진 곳
//--------------------------------------------------------------------
        var dx = 2;
        var dy = -2;
//--------------------------------------------------------------------
        var ballRadius = 10;

        var paddleHeight = 75;
        var paddleWidht = 10;
        var paddleX = (canvas.width - paddleWidht);

        var upPressed = false;
        var downPressed = false;
        document.addEventListener("keydown", keyDownHandler, false);
        document.addEventListener("keyup", keyUpHandler, false);
//----------------------------------------------------------------------
        function keyDownHandler(e){
        if(e.key == "up" || e.key == "ArrowUp"){
          upPressed = true;
          }
        else if(e.key == "down" || e.key == "ArrowDown"){
          downPressed = true;
          }
        }
        function keyUpHandler(e){
          if(e.key == "up" || e.key == "ArrowUp"){
              upPressed = false;
            }
          else if(e.key == "down" || e.key == "ArrowDown"){
              downPressed = false;
            }
        }

        function boxDraw(){
          ctx.beginPath();
          ctx.rect(160, 10, 100, 40);
          ctx.strokeStyle = "rgba(0, 0, 255, 0.5)";
          ctx.stroke();
          ctx.closePath();
        }

        function drawPaddle(){
          ctx.beginPath();
          ctx.rect(paddleX, canvas.height - paddleHeight, paddleWidht, paddleHeight);
          ctx.fillStyle = "#FFFF00";
          ctx.fill();
          ctx.closePath();
        }

        function ball(){
          ctx.beginPath();
          ctx.arc(x, y, ballRadius, 0, Math.PI*2);
          ctx.fillStyle = "#0095DD";
          ctx.fill();
          ctx.closePath();
        }

        function ballDraw(){
          ctx.clearRect(0, 0, canvas.width, canvas.height);//지나는 물체가 남긴 찌꺼기들을 지워줌
          ball();
          drawPaddle();
          // 공을 튕겨내는 벽 생성----------------------------------------
          if(x + dx > canvas.width-ballRadius || x + dx < ballRadius){
            dx = -dx;
          }

          if(y + dy > canvas.height-ballRadius || y + dy < ballRadius ){ // 위 아래벽 튕겨내기
            dy = -dy;
          }
          //-------------------------------------------------------------
          if(upPressed){
            paddleX += 7;
            if(paddleX + paddleWidht > canvas.width){
              paddleX = canvas.width - paddleWidht;
            }
          }
          else if(downPressed){
            paddleX -= 7;
            if(paddleX < 0){
              paddleX = 0;
            }
          }

          x += dx;
          y += dy;
        }

        setInterval(boxDraw, 20);
        setInterval(ballDraw, 20);



    </script>

  </body>
</html>
